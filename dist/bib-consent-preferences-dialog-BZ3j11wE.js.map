{"version":3,"file":"bib-consent-preferences-dialog-BZ3j11wE.js","sources":["../node_modules/@lit/context/development/lib/context-request-event.js","../node_modules/@lit/context/development/lib/controllers/context-consumer.js","../node_modules/@auroratide/toggle-switch/lib/events.js","../node_modules/@auroratide/toggle-switch/lib/toggle-switch.js","../node_modules/@auroratide/toggle-switch/lib/define.js","../src/components/bib-consent/bib-consent-preferences-dialog.js"],"sourcesContent":["/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n/**\n * An event fired by a context requester to signal it desires a specified context with the given key.\n *\n * A provider should inspect the `context` property of the event to determine if it has a value that can\n * satisfy the request, calling the `callback` with the requested value if so.\n *\n * If the requested context event contains a truthy `subscribe` value, then a provider can call the callback\n * multiple times if the value is changed, if this is the case the provider should pass an `unsubscribe`\n * method to the callback which consumers can invoke to indicate they no longer wish to receive these updates.\n *\n * If no `subscribe` value is present in the event, then the provider can assume that this is a 'one time'\n * request for the context and can therefore not track the consumer.\n */\nexport class ContextRequestEvent extends Event {\n    /**\n     *\n     * @param context the context key to request\n     * @param callback the callback that should be invoked when the context with the specified key is available\n     * @param subscribe when, true indicates we want to subscribe to future updates\n     */\n    constructor(context, callback, subscribe) {\n        super('context-request', { bubbles: true, composed: true });\n        this.context = context;\n        this.callback = callback;\n        this.subscribe = subscribe ?? false;\n    }\n}\n//# sourceMappingURL=context-request-event.js.map","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nimport { ContextRequestEvent, } from '../context-request-event.js';\n/**\n * A ReactiveController which adds context consuming behavior to a custom\n * element by dispatching `context-request` events.\n *\n * When the host element is connected to the document it will emit a\n * `context-request` event with its context key. When the context request\n * is satisfied the controller will invoke the callback, if present, and\n * trigger a host update so it can respond to the new value.\n *\n * It will also call the dispose method given by the provider when the\n * host element is disconnected.\n */\nexport class ContextConsumer {\n    constructor(host, contextOrOptions, callback, subscribe) {\n        this.subscribe = false;\n        this.provided = false;\n        this.value = undefined;\n        // This function must have stable identity to properly dedupe in ContextRoot\n        // if this element connects multiple times.\n        this._callback = (value, unsubscribe) => {\n            // some providers will pass an unsubscribe function indicating they may provide future values\n            if (this.unsubscribe) {\n                // if the unsubscribe function changes this implies we have changed provider\n                if (this.unsubscribe !== unsubscribe) {\n                    // cleanup the old provider\n                    this.provided = false;\n                    this.unsubscribe();\n                }\n                // if we don't support subscription, immediately unsubscribe\n                if (!this.subscribe) {\n                    this.unsubscribe();\n                }\n            }\n            // store the value so that it can be retrieved from the controller\n            this.value = value;\n            // schedule an update in case this value is used in a template\n            this.host.requestUpdate();\n            // only invoke callback if we are either expecting updates or have not yet\n            // been provided a value\n            if (!this.provided || this.subscribe) {\n                this.provided = true;\n                if (this.callback) {\n                    this.callback(value, unsubscribe);\n                }\n            }\n            this.unsubscribe = unsubscribe;\n        };\n        this.host = host;\n        // This is a potentially fragile duck-type. It means a context object can't\n        // have a property name context and be used in positional argument form.\n        if (contextOrOptions.context !== undefined) {\n            const options = contextOrOptions;\n            this.context = options.context;\n            this.callback = options.callback;\n            this.subscribe = options.subscribe ?? false;\n        }\n        else {\n            this.context = contextOrOptions;\n            this.callback = callback;\n            this.subscribe = subscribe ?? false;\n        }\n        this.host.addController(this);\n    }\n    hostConnected() {\n        this.dispatchRequest();\n    }\n    hostDisconnected() {\n        if (this.unsubscribe) {\n            this.unsubscribe();\n            this.unsubscribe = undefined;\n        }\n    }\n    dispatchRequest() {\n        this.host.dispatchEvent(new ContextRequestEvent(this.context, this._callback, this.subscribe));\n    }\n}\n//# sourceMappingURL=context-consumer.js.map","export const CHANGED = 'toggle-switch:change';\nexport const changeEvent = (checked) => new CustomEvent(CHANGED, {\n    detail: { checked }\n});\n","import { changeEvent } from './events.js';\nconst CHECKED_ATTR = 'checked';\nconst DISABLED_ATTR = 'disabled';\nexport class ToggleSwitchElement extends HTMLElement {\n    static defaultElementName = 'toggle-switch';\n    static html = `\n        <span part=\"track\">\n            <span part=\"slider\"></span>\n        </span>\n    `;\n    static css = `\n        :host {\n            display: inline-block;\n            width: 2em;\n            height: 1em;\n            cursor: pointer;\n        }\n\n        span {\n            box-sizing: border-box;\n            display: inline-block;\n            line-height: 1;\n        }\n\n        [part=\"track\"] {\n            width: 100%;\n            height: 100%;\n            background-color: #dddddd;\n            text-align: left;\n            transition: all 0.256s;\n        }\n\n        [part=\"slider\"] {\n            width: 50%;\n            height: 100%;\n            background-color: #777777;\n            transition: all 0.256s;\n            vertical-align: text-top;\n        }\n\n        :host([checked]) [part=\"slider\"] {\n            transform: translateX(100%);\n        }\n\n        :host([disabled]) {\n            cursor: not-allowed;\n            opacity: 0.5;\n        }\n    `;\n    static formAssociated = true;\n    static get observedAttributes() {\n        return [CHECKED_ATTR];\n    }\n    constructor() {\n        super();\n        this.#createRoot();\n    }\n    get checked() { return this.hasAttribute(CHECKED_ATTR); }\n    set checked(value) { this.toggleAttribute(CHECKED_ATTR, value); }\n    get disabled() { return this.hasAttribute(DISABLED_ATTR); }\n    set disabled(value) { this.toggleAttribute(DISABLED_ATTR, value); }\n    toggle = () => {\n        if (!this.disabled) {\n            this.checked = !this.checked;\n        }\n    };\n    connectedCallback() {\n        if (!this.hasAttribute('role')) {\n            this.setAttribute('role', 'switch');\n        }\n        if (!this.hasAttribute('tabindex')) {\n            this.setAttribute('tabindex', '0');\n        }\n        this.#updateChecked(false);\n        this.addEventListener('click', this.toggle);\n        this.addEventListener('keydown', this.#onKeyDown);\n    }\n    disconnectedCallback() {\n        this.removeEventListener('click', this.toggle);\n        this.removeEventListener('keydown', this.#onKeyDown);\n    }\n    attributeChangedCallback(name) {\n        if (name === CHECKED_ATTR) {\n            this.#updateChecked(true);\n        }\n    }\n    #onKeyDown = (e) => {\n        switch (e.key) {\n            case ' ':\n            case 'Enter':\n                e.preventDefault();\n                this.toggle();\n                break;\n            default:\n                break;\n        }\n    };\n    #updateChecked = (dispatch = false) => {\n        this.setAttribute('aria-checked', this.checked.toString());\n        if (dispatch)\n            this.dispatchEvent(changeEvent(this.checked));\n    };\n    #createRoot = () => {\n        const root = this.shadowRoot ?? this.attachShadow({ mode: 'open' });\n        const style = document.createElement('style');\n        style.innerHTML = ToggleSwitchElement.css;\n        const template = document.createElement('template');\n        template.innerHTML = ToggleSwitchElement.html;\n        root.appendChild(style);\n        root.appendChild(template.content);\n        return root;\n    };\n}\n","import { ToggleSwitchElement } from './toggle-switch.js';\nif (!window.customElements.get(ToggleSwitchElement.defaultElementName)) {\n    window.customElements.define(ToggleSwitchElement.defaultElementName, ToggleSwitchElement);\n}\n","import { css, html, LitElement, unsafeCSS } from 'lit'\nimport { ContextConsumer } from '@lit/context'\nimport { createRef, ref } from 'lit/directives/ref.js'\nimport '@auroratide/toggle-switch/lib/define.js'\nimport { consentContext } from './consent-context.js'\nimport { ConsentTokens } from './ConsentTokens.js'\nimport { DEFAULT_PREFERENCES, CONSENT_STATES } from './constants.js'\nimport styles from './bib-consent-preferences-dialog.scss?inline'\n\n/**\n * Generates an object with the default consent preferences, where each key is set to the provided boolean value.\n *\n * @param {boolean} value - The boolean value to set for each consent preference.\n * @returns {Object} An object with the default consent preferences, where each key is set to the provided value.\n */\nfunction getConsentValues(value) {\n  return Object.keys(DEFAULT_PREFERENCES).reduce((obj, key) => ({ ...obj, [key]: value }), {})\n}\n\nexport class BibConsentPreferencesDialog extends LitElement {\n  static properties = {\n    debug: {\n      type: Boolean,\n      reflect: true\n    },\n    open: {\n      type: Boolean,\n      state: true\n    },\n  }\n\n  static styles = [\n    css`${unsafeCSS(styles)}`\n  ]\n\n  _consentConsumer\n  #toggleChoices\n\n  /**\n   * Constructs a new `BibConsentPreferencesDialog` instance.\n   *\n   * This constructor initializes the component's state, creates a reference to the dialog element, and subscribes to the consent context to retrieve the user's consent preferences.\n   *\n   * The `open` property is initially set to `false`, and the `#toggleChoices` property is initialized based on the consent context value. If the consent context value is `null`, `#toggleChoices` is set to the default consent preferences.\n   */\n  constructor() {\n    super()\n    this.open = false\n    this._dialogRef = createRef()\n    this.#toggleChoices = new ConsentTokens(false)\n    this._consentConsumer = new ContextConsumer(this, {\n      context: consentContext, subscribe: true, callback: tokens => {\n        try {\n\n          const consentTokens = ConsentTokens.from(tokens)\n\n          if (consentTokens.state() === CONSENT_STATES.INDETERMINATE) {\n            this.#toggleChoices.setAll(false)\n            return\n          }\n\n          this.#toggleChoices.setAll(consentTokens)\n        } catch (error) {\n          console.error('[BibConsentPreferencesDialog] error: ', error)\n          throw error\n        }\n      }\n    })\n  }\n\n  /**\n   * Saves the user's consent preferences.\n   *\n   * @param {boolean|Object} preference - The consent preferences to save. If a boolean is provided, it will be used to generate a full set of consent values. If an object is provided, it will be used directly as the consent preferences.\n   * @returns {void}\n   * @throws {Error} If there is an error saving the preferences.\n   */\n  async savePreferences(preference) {\n    try {\n      if (typeof preference !== 'undefined') {\n        this.#toggleChoices.setAll(preference)\n      }\n\n      this.dispatchEvent(new CustomEvent('update', { detail: this.#toggleChoices }))\n    } catch (error) {\n      console.error('[savePreferences] error: ', error)\n      throw error\n    }\n  }\n\n  /**\n   * Shows the consent preferences dialog.\n   *\n   * This method retrieves the user's consent preferences from the consent context and initializes the `#toggleChoices` property with the values. It then shows the dialog modal.\n   *\n   * @returns {void}\n   */\n  show() {\n    const tokens = this._consentConsumer.value?.state() === CONSENT_STATES.DETERMINATE ? this._consentConsumer.value : false\n\n    console.log('tokens', tokens)\n\n    this.#toggleChoices.setAll(tokens)\n\n    this._dialogRef.value?.showModal()\n  }\n\n  /**\n   * Closes the dialog and optionally emits an event.\n   *\n   * @param {boolean} [emit=true] - Whether to emit the 'close' event when the dialog is closed.\n   * @returns {void}\n   */\n  close(emit = true) {\n    this._dialogRef.value?.close(emit)\n  }\n\n  #onDetailsClick(event) {\n    // Prevent the <details> element to open if user clics on the toggle button\n    if (event.composedPath().some(node => node.matches?.('toggle-switch.switch'))) {\n      event.preventDefault()\n    }\n  }\n\n  #onToggleSwitchChange(event) {\n    const { target, detail } = event\n    const { checked } = detail\n    const name = target.getAttribute('name')\n    this.#toggleChoices[name] = checked\n  }\n\n  render() {\n\n    return html`\n      <bib-consent-dialog show-close class='preferences-dialog' ${ref(this._dialogRef)}>\n        <div class=\"content-container\">\n          <div class=\"title\">Personnaliser les témoins</div>\n          <div class=\"personalized-cookies-description\">\n            <p>Les témoins (aussi appelés «&nbsp;cookies&nbsp;») sont de petits fichiers textes qui sont téléchargés lorsque vous consultez certaines pages d’un site et qui sont enregistrés dans la mémoire de l’appareil que vous utilisez. Ils permettent d’enregistrer certaines informations (type de navigateur, langue, pays, adresse IP, identifiant, etc.) afin d’être récupérées par le serveur lors de visites subséquentes. Ils sont utilisés pour mettre à jour et optimiser nos plateformes en fonction de l’utilisation que vous en faites et de vos besoins.</p>\n            <p>L’UdeM collecte des données sur les plateformes, afin d’analyser leur utilisation et d’améliorer l’expérience des visiteurs.</p>\n            <p>L’UdeM utilise également les services de <a href=\"https://vie-privee.umontreal.ca/ga\" target=\"_blank\"> Google Analytics</a>, afin d'analyser le trafic Web et de recueillir des données de navigation à des fins statistiques et d’amélioration des Plateformes.</p>\n            <p>Parce que nous respectons votre droit à la vie privée, nous vous donnons la possibilité de ne pas autoriser certains types de témoins. Cliquez sur les différentes catégories pour obtenir plus de détails sur chacune d’entre elles et modifier les paramètres par défaut. Toutefois, si vous désactivez certains types de témoins, votre expérience de navigation et les services que nous sommes en mesure de vous offrir peuvent être impactés.</p>\n          </div>\n          <div class=\"accordion-container\">\n            <div class=\"accordion-list\">\n              <details class=\"accordion-item\">\n                <summary class=\"accordion-item__summary\">\n                  <span class=\"accordion-item__summary-title\">Témoins nécessaires</span>\n                  <span class=\"accordion-item__summary-icon\">\n                    <span class=\"close\">+</span>\n                    <span class=\"open\">-</span>\n                    <div class=\"toggle-container label\">Toujours activés</div>\n                  </span>\n                </summary>\n                <div class=\"accordion-item__content\">\n                  <p>Ces témoins sont essentiels au bon fonctionnement et à la sécurité de nos sites Web et services en ligne. Ils ne peuvent pas être désactivés. Ils nous permettent notamment de sécuriser votre connexion en recueillant vos informations d’identification, personnaliser votre interface (ex. : choix de langue) et conserver vos préférences.</p>\n                  <p class=\"list-title\">Les renseignements suivants sont notamment recueillis&nbsp;:</p>\n                  <ul class=\"list-disc\">\n                    <li>le type et la version du navigateur;</li>\n                    <li>le type et la version du système d’exploitation;</li>\n                    <li>le type et le modèle d’appareil (téléphone, tablette ou ordinateur);</li>\n                    <li>la résolution de l’écran de l’appareil que vous utilisez;</li>\n                    <li>la langue utilisée par le navigateur.</li>\n                  </ul>\n                </div>\n              </details>\n\n              <details class=\"accordion-item\" @click=\"${{ handleEvent: this.#onDetailsClick, capture: true }}\">\n                <summary class=\"accordion-item__summary\">\n                  <div class=\"accordion-item__summary-title\">Témoins de performance</div>\n                  <div class=\"accordion-item__summary-icon\">\n                    <span class=\"close\">+</span>\n                    <span class=\"open\">-</span>\n                    <div class=\"toggle-container\">\n                      <toggle-switch name=\"analytics_consent\" class=\"switch\" ?checked=\"${this.#toggleChoices.analytics_consent === 'granted'}\" @toggle-switch:change=\"${this.#onToggleSwitchChange}\"></toggle-switch>\n                    </div>\n                  </div>\n                </summary>\n                <div class=\"accordion-item__content\">\n                  <p>Ces témoins sont utilisés pour analyser la navigation sur nos sites (provenance des visiteurs, fréquence des visites, pages plus ou moins visitées, etc.) dans le but d’en améliorer le fonctionnement et d’offrir une meilleure expérience utilisateurs aux visiteurs. Toutes les informations collectées par ces témoins sont agrégées et donc anonymisées.</p>\n                </div>\n              </details>\n\n              <details class=\"accordion-item\" @click=\"${{ handleEvent: this.#onDetailsClick, capture: true }}\">\n                <summary class=\"accordion-item__summary\">\n                  <span class=\"accordion-item__summary-title\">Témoins de fonctionnalité</span>\n                  <span class=\"accordion-item__summary-icon\">\n                    <span class=\"close\">+</span>\n                    <span class=\"open\">-</span>\n                    <div class=\"toggle-container\">\n                      <toggle-switch name=\"functionality_consent\" class=\"switch\" ?checked=\"${this.#toggleChoices.functionality_consent === 'granted'}\" @toggle-switch:change=\"${this.#onToggleSwitchChange}\"></toggle-switch>\n                    </div>\n                  </span>\n                </summary>\n                <div class=\"accordion-item__content\">\n                  <p>Ces témoins permettent d’améliorer les fonctionnalités et la personnalisation de nos sites. Par exemple, ils rendent possible l’utilisation de vidéos et de services de messagerie instantanée ou encore le partage de contenus de nos sites sur des plateformes de médias sociaux. Si vous désactivez ces témoins, votre expérience de navigation et les services que nous sommes en mesure de vous offrir peuvent être impactés.</p>\n                </div>\n              </details>\n              <details class=\"accordion-item\" @click=\"${{ handleEvent: this.#onDetailsClick, capture: true }}\">\n                <summary class=\"accordion-item__summary\"><span class=\"accordion-item__summary-title\">Témoins publicitaires</span><span class=\"accordion-item__summary-icon\"><span class=\"close\">+</span><span class=\"open\">-</span>\n                    <div class=\"toggle-container\">\n                      <toggle-switch name=\"ad_consent\" class=\"switch\" ?checked=\"${this.#toggleChoices.ad_consent === 'granted'}\" @toggle-switch:change=\"${this.#onToggleSwitchChange}\"></toggle-switch>\n                    </div>\n                  </span></summary>\n                <div class=\"accordion-item__content\">\n                  <p>Ces témoins peuvent être activés sur nos sites web pour établir des profils sur vos intérêts. Ils nous aident à vous proposer des publicités et des contenus personnalisés. Si vous désactivez ces témoins, des publicités et des contenus moins ciblées sur vos intérêts vous seront proposés.</p>\n                </div>\n              </details>\n            </div>\n            <p class=\"update-information\">Vous pouvez modifier en tout temps vos préférences en sélectionnant les paramètres appropriés dans votre navigateur pour accepter ou refuser les témoins.</p>\n            <div class=\"actions-container\">\n              <button class=\"btn--filled\" type=\"button\" @click=\"${() => this.savePreferences()}\">Enregistrer mes préférences</button>\n              <button class=\"btn--filled\" type=\"button\" @click=\"${() => this.savePreferences(false)}\">Tout refuser</button>\n              <button class=\"btn--filled\" type=\"button\" @click=\"${() => this.savePreferences(true)}\">Tout accepter</button>\n            </div>\n            <div class=\"learn-more-container\">Voir notre <a href=\"https://vie-privee.umontreal.ca/confidentialite\">politique de confidentialité</a> et nos <a href=\"https://vie-privee.umontreal.ca/conditions-dutilisation\">conditions d’utilisation</a>. </div>\n          </div>\n        </div>\n      </bib-consent-dialog>\n    `\n  }\n}\n\nif (!window.customElements.get('bib-consent-preferences-dialog')) {\n  window.customElements.define('bib-consent-preferences-dialog', BibConsentPreferencesDialog)\n}"],"names":["ContextRequestEvent","Event","context","callback","subscribe","super","bubbles","composed","this","ContextConsumer","host","contextOrOptions","provided","value","_callback","unsubscribe","requestUpdate","undefined","options","addController","hostConnected","dispatchRequest","dispatchEvent","CHECKED_ATTR","DISABLED_ATTR","ToggleSwitchElement","HTMLElement","static","toggle","disabled","checked","onKeyDown","e","key","preventDefault","updateChecked","dispatch","setAttribute","toString","CustomEvent","detail","t","createRoot","root","shadowRoot","attachShadow","mode","style","document","createElement","innerHTML","css","template","html","appendChild","content","hasAttribute","toggleAttribute","addEventListener","disconnectedCallback","removeEventListener","name","window","customElements","get","defaultElementName","define","BibConsentPreferencesDialog","LitElement","_consentConsumer","toggleChoices","open","_dialogRef","createRef","ConsentTokens","consentContext","tokens","consentTokens","from","state","CONSENT_STATES","INDETERMINATE","setAll","error","console","savePreferences","preference","show","DETERMINATE","log","showModal","emit","close","ref","handleEvent","onDetailsClick","capture","analytics_consent","functionality_consent","ad_consent","onToggleSwitchChange","event","composedPath","some","node","matches","target","getAttribute","debug","type","Boolean","reflect","unsafeCSS"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}