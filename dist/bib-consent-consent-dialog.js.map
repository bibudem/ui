{"version":3,"file":"bib-consent-consent-dialog.js","sources":["../src/components/bib-consent/bib-consent-consent-dialog.js"],"sourcesContent":["import { css, html, LitElement, unsafeCSS } from 'lit'\nimport { createRef, ref } from 'lit/directives/ref.js'\nimport './bib-consent-dialog.js'\nimport { DEFAULT_PREFERENCES } from './constants.js'\nimport styles from './bib-consent-consent-dialog.scss?inline'\n\n/**\n * Creates an object with all properties of `DEFAULT_PREFERENCES` set to the provided `value`.\n *\n * @param {boolean} value - The value to set for all properties in the returned object.\n * @returns {Object} An object with all properties of `DEFAULT_PREFERENCES` set to the provided `value`.\n */\nfunction all(value) {\n  return Object.keys(DEFAULT_PREFERENCES).reduce((prefs, prop) => ({ ...prefs, [prop]: value }), {})\n}\n\n/**\n * The `BibConsentConsentDialog` component creates a consent dialog for managing user preferences related to cookies and other tracking technologies.\n *\n * The component provides the following functionality:\n * - Displays a consent dialog with options to customize preferences, accept all, or reject all.\n * - Allows setting preferences by dispatching a `update` event with the new preferences.\n * - Provides methods to show, close, and display the preferences dialog.\n *\n * The component uses the `bib-consent-dialog` component to render the actual dialog.\n */\nexport class BibConsentConsentDialog extends LitElement {\n  static properties = {\n    debug: {\n      type: Boolean,\n      reflect: true\n    },\n    open: {\n      type: Boolean,\n      state: true\n    },\n  }\n\n  static styles = [\n    css`${unsafeCSS(styles)}`\n  ]\n\n  constructor() {\n    super()\n    this.open = false\n    this.dialogRef = createRef()\n  }\n\n  /**\n   * Sets the preferences for the consent dialog.\n   *\n   * @param {Object} preferences - An object containing the preferences to set.\n   * @emits update - Dispatches a custom event with the updated preferences.\n   */\n  setConsentTokens(preferences) {\n    this.dispatchEvent(new CustomEvent('update', { detail: preferences }))\n  }\n\n  /**\n   * Shows the consent dialog if it is not already open.\n   */\n  show() {\n    if (this.dialogRef.value && !this.dialogRef.value.open) {\n      this.dialogRef.value?.show()\n    }\n  }\n\n  /**\n   * Closes the consent dialog if it is currently open.\n   */\n  close() {\n    if (this.dialogRef.value && this.dialogRef.value.open) {\n      this.dialogRef.value?.close()\n    }\n  }\n\n  /**\n   * Shows the preferences dialog for the consent dialog.\n   *\n   * This method dispatches a custom 'show-preferences' event to notify other components that the preferences dialog should be shown.\n   */\n  showPreferences() {\n    this.dispatchEvent(new CustomEvent('show-preferences'))\n  }\n\n  render() {\n    return html`\n      <bib-consent-dialog class='consent-dialog' ${ref(this.dialogRef)}>\n          <div class=\"title\" autofocus>L’UdeM reconnaît l’importance de respecter la vie privée</div>\n          <p>L’utilisation de témoins nous permet d’améliorer et de personnaliser votre expérience Web. Certains témoins sont obligatoires pour assurer le fonctionnement et la sécurité du site Web, alors que d’autres enregistrent vos préférences. En acceptant tout, vous consentez à notre utilisation de témoins pour mieux répondre à vos besoins.</p>\n          <div class=\"actions-container\">\n            <button class=\"btn--outlined\" type=\"button\" @click=\"${() => this.showPreferences()}\">Personnaliser les témoins <span>&gt;</span></button>\n            <button class=\"btn--filled\" type=\"button\" @click=\"${() => this.setConsentTokens(false)}\">Tout refuser</button>\n            <button class=\"btn--filled\" type=\"button\" @click=\"${() => this.setConsentTokens(true)}\">Tout accepter</button>\n          </div>\n          <p class=\"learn-more-container\">\n            Voir notre <a href=\"https://vie-privee.umontreal.ca/confidentialite\">politique de confidentialité</a> et nos <a href=\"https://vie-privee.umontreal.ca/conditions-dutilisation\">conditions d’utilisation</a>.\n          </p>\n      </bib-consent-dialog>\n    `\n  }\n}\n\nif (!window.customElements.get('bib-consent-consent-dialog')) {\n  window.customElements.define('bib-consent-consent-dialog', BibConsentConsentDialog)\n}"],"names":["BibConsentConsentDialog","LitElement","static","super","this","open","dialogRef","createRef","preferences","dispatchEvent","CustomEvent","detail","value","show","close","render","html","ref","showPreferences","setConsentTokens","debug","type","Boolean","reflect","state","css","unsafeCSS","window","customElements","get","define"],"mappings":";;;;;;;AA0BO,MAAMA,UAAgCC,EAC3CC;AAAAA,EAeA,cACEC;AAAAA,UAAAA,GACAC,KAAKC,OAAAA,OACLD,KAAKE,YAAYC,EAAAA;AAAAA,EAClB;AAAA,EAQD,iBAAiBC,IAAAA;AACfJ,SAAKK,cAAc,IAAIC,YAAY,UAAU,EAAEC,QAAQH,GAAAA,CAAAA,CAAAA;AAAAA,EACxD;AAAA,EAKD,OACMJ;AAAAA,SAAKE,UAAUM,SAAAA,CAAUR,KAAKE,UAAUM,MAAMP,QAChDD,KAAKE,UAAUM,OAAOC,KAEzB;AAAA,EAAA;AAAA,EAKD,QAAAC;AACMV,SAAKE,UAAUM,SAASR,KAAKE,UAAUM,MAAMP,QAC/CD,KAAKE,UAAUM,OAAOE,MAAAA;AAAAA,EAEzB;AAAA,EAOD,kBACEV;AAAAA,SAAKK,cAAc,IAAIC,YAAY,kBAAA,CAAA;AAAA,EACpC;AAAA,EAED,SAAAK;AACE,WAAOC,+CACwCC,EAAIb,KAAKE,SAAAA,CAAAA,sgBAIM,MAAMF,KAAKc,gBACb,CAAA,yGAAA,MAAMd,KAAKe,iBAAAA,KACX,CAAA,6EAAA,MAAMf,KAAKe,iBAAAA,IAOxE,CAAA;AAAA,EAAA;AAAA;AAzEDjB,cADWF,GACXE,cAAoB,EAClBkB,OAAO,EACLC,MAAMC,SACNC,SAAS,KAAA,GAEXlB,MAAM,EACJgB,MAAMC,SACNE,OAAO,KAAA,EAAA;AAIXtB,cAZWF,GAYK,UAAA,CACdyB,IAAMC,snJAGR,CAAA,EAAA;AA6DGC,OAAOC,eAAeC,IAAI,4BAAA,KAC7BF,OAAOC,eAAeE,OAAO,8BAA8B9B;"}