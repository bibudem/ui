{"version":3,"file":"bib-consent-dialog.cjs","sources":["../src/components/bib-consent/bib-consent-dialog.js"],"sourcesContent":["import { css, html, LitElement, nothing, unsafeCSS } from 'lit'\nimport { createRef, ref } from 'lit/directives/ref.js'\nimport { DEFAULT_PREFERENCES } from './constants.js'\nimport styles from './bib-consent-dialog.scss?inline'\n\n/**\n * A custom dialog element that can be shown or hidden, with an optional close button.\n * \n * The dialog can be shown either as a modal or non-modal dialog. It dispatches a 'close' event when closed.\n * \n * @property {boolean} debug - Indicates whether the dialog is in debug mode.\n * @property {boolean} open - Indicates whether the dialog is currently open.\n * @property {boolean} showClose - Indicates whether a close button should be displayed.\n */\nexport class BibConsentDialog extends LitElement {\n  static properties = {\n    debug: {\n      type: Boolean,\n      reflect: true\n    },\n    open: {\n      type: Boolean,\n      reflect: true\n    },\n    showClose: {\n      type: Boolean,\n      reflect: true,\n      attribute: 'show-close'\n    }\n  }\n\n  static styles = [\n    css`${unsafeCSS(styles)}`\n  ]\n\n  /**\n   * Initializes the `BibConsentDialog` component.\n   * \n   * This constructor sets the initial state of the component, including whether the dialog is open and whether a close button should be displayed.\n   * \n   * The `_dialogRef` property is a reference to the dialog element, which is used to control the dialog's visibility and behavior.\n   */\n  constructor() {\n    super()\n    this.open = false\n    this.showClose = this.showClose || false\n    this._dialogRef = createRef()\n  }\n\n  /**\n   * Adds an event listener to the dialog element to listen for the 'close' event, and calls the `close()` method when the dialog is closed.\n   * \n   * This method is called when the component is connected to the DOM, and sets up the necessary event listener to handle the dialog's closing.\n   */\n  connectedCallback() {\n    super.connectedCallback()\n\n    this._dialogRef.value?.addEventListener('close', () => this.close())\n  }\n\n  #showCloseButton() {\n    return this.showClose ? html`\n        <bib-button-close @click=\"${() => this.close()}\" class=\"btn-close\"></bib-button-close>\n        ` : nothing\n  }\n\n  #show(mode = '') {\n    if (this._dialogRef.value && !this._dialogRef.value.open) {\n      mode === 'modal' ? this._dialogRef.value?.showModal() : this._dialogRef.value?.show()\n      this.open = true\n    }\n  }\n\n  /**\n   * Shows the dialog.\n   * \n   * This method sets the `open` property to `true` and calls the `show()` method on the dialog element to display it.\n   */\n  show() {\n    this.#show()\n  }\n\n  /**\n   * Shows the dialog in modal mode.\n   * \n   * This method sets the `open` property to `true` and calls the `showModal()` method on the dialog element to display it in modal mode.\n   */\n  showModal() {\n    this.#show('modal')\n  }\n\n  /**\n   * Closes the dialog and optionally dispatches a 'close' event.\n   * \n   * This method sets the `open` property to `false` and calls the `close()` method on the dialog element to hide it. If the `emit` parameter is `true`, it also dispatches a 'close' event that bubbles up and is composed.\n   * \n   * @param {boolean} [emit=true] - Whether to dispatch a 'close' event.\n   */\n  close(emit = true) {\n    this.open = false\n    if (this._dialogRef.value && this._dialogRef.value.open) {\n      this._dialogRef.value?.close()\n    }\n    emit && this.dispatchEvent(new CustomEvent('close', { bubbles: true, composed: true }))\n  }\n\n  render() {\n    return html`\n      <dialog class=\"dialog\" ${ref(this._dialogRef)}>\n        ${this.#showCloseButton()}\n        <div class=\"dialog-container\">\n          <div class=\"content-container\">\n            <slot></slot>\n          </div>\n        </div>\n      </dialog>\n    `\n  }\n}\n\nif (!window.customElements.get('bib-consent-dialog')) {\n  window.customElements.define('bib-consent-dialog', BibConsentDialog)\n}"],"names":["BibConsentDialog","LitElement","constructor","this","_r_instances","open","showClose","_dialogRef","createRef","connectedCallback","value","addEventListener","close","show","showModal","emit","dispatchEvent","CustomEvent","bubbles","composed","render","html","ref","n","WeakSet","o_fn","showCloseButton","nothing","T","e_fn","mode","static","debug","type","Boolean","reflect","attribute","css","unsafeCSS","window","customElements","get","define"],"mappings":"4bAcO,MAAMA,UAAyBC,EAAAA,EA4BpC,WAAAC,uBA5BKC,QAAAC,0GA8BEC,KAAAA,MAAAA,EACLF,KAAKG,UAAYH,KAAKG,YAAa,EACnCH,KAAKI,WAAaC,KACnB,CAOD,iBAAAC,GACQA,MAAAA,oBAENN,KAAKI,WAAWG,OAAOC,iBAAiB,SAAS,IAAMR,KAAKS,SAC7D,CAoBD,IAAAC,GACEV,EAAAA,KAAKU,EAALV,GAAAA,KAAAA,KACD,CAOD,SAAAW,GACEX,EAAAA,UAAAA,KAAWA,KAAA,QACZ,CASD,KAAAS,CAAMG,MACCV,KAAAA,QACDF,KAAKI,WAAWG,OAASP,KAAKI,WAAWG,MAAML,MACjDF,KAAKI,WAAWG,OAAOE,QAEzBG,GAAQZ,KAAKa,cAAc,IAAIC,YAAY,QAAS,CAAEC,WAAeC,UAAAA,IACtE,CAED,MAAAC,GACSC,OAAAA,GACoBC,0BAAAA,EAAGC,EAACpB,KAAKI,eAC9BJ,YAAAA,KAQPA,sGAAA,EAvGIC,EAAA,IAAAoB,QA8CLC,EAAAC,WACSvB,OAAAA,KAAKG,UAAYe,EAAAA,CAAAA,6BACQ,IAAMlB,KAAKS,iDACnCe,EAAOC,CAChB,EAEDC,EAAAhB,SAAMiB,EAAO,IACFvB,KAAAA,WAAWG,QAAUP,KAAKI,WAAWG,MAAML,OACzC,UAATyB,EAAmB3B,KAAKI,WAAWG,OAAOI,YAAcX,KAAKI,WAAWG,OAAOG,OAC/EV,KAAKE,MAAAA,EAER,EAxDD0B,EADW/B,EACX+B,aAAoB,CAClBC,MAAO,CACLC,KAAMC,QACNC,YAEF9B,KAAM,CACJ4B,KAAMC,QACNC,YAEF7B,UAAW,CACT2B,KAAMC,QACNC,WACAC,UAAW,gBAIfL,EAjBW/B,EAiBK,SAAA,CACdqC,EAAAA,IAAMC,EAAAA,ssJAwFLC,OAAOC,eAAeC,IAAI,uBAC7BF,OAAOC,eAAeE,OAAO,qBAAsB1C"}