/**
 * Librairie du system desing des Bibliothèques de l'Université de Montréal
 * @module @bibudem/ui
 * @version 1.2.1
 * @author Christian Rémillard <christian.remillard@umontreal.ca>
 * @license ISC
 * @see https://github.com/bibudem/ui
 */
var t,e,n,i,s=Object.defineProperty,o=t=>{throw TypeError(t)},r=(t,e,n)=>((t,e,n)=>e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n)(t,"symbol"!=typeof e?e+"":e,n),a=(t,e,n)=>e.has(t)||o("Cannot "+n),c=(t,e,n)=>(a(t,e,"read from private field"),n?n.call(t):e.get(t)),l=(t,e,n)=>e.has(t)?o("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),d=(t,e,n)=>(a(t,e,"access private method"),n);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const y=require("./lit-element-BHNMc-Kg.cjs"),u=require("./bib-CxkFjFJ8.cjs"),p=require("./events-DuQfPugX.cjs"),h=require("./constants3.cjs"),b=require("./constants2.cjs"),m={init(t){!function(t){try{return e=window,n=document,i="clarity",s="script",o=t,void(n.getElementById("clarity-script")||(e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},(r=n.createElement(s)).async=1,r.src="https://www.clarity.ms/tag/"+o+"?ref=npm",r.id="clarity-script",(a=n.getElementsByTagName(s)[0]).parentNode.insertBefore(r,a)))}catch(c){return}var e,n,i,s,o,r,a}(t)},setTag(t,e){window.clarity("set",t,e)},identify(t,e,n,i){window.clarity("identify",t,e,n,i)},consent(t=!0){window.clarity("consent",t)},upgrade(t){window.clarity("upgrade",t)},event(t){window.clarity("event",t)}};class f extends y.s{constructor(){super(),l(this,e),l(this,t,null),this.hidden=!0,this.projectId=this.projectId||h.CLARITY_PROJECT_ID,this.clarity=m,d(this,e,n).call(this)}setConsent(n){if("boolean"!=typeof n)throw new TypeError('The "granted" parameter must be a boolean. Got',typeof n);var s,o,r,l;c(this,t)!==n&&(console.log(`[bib-clarity] Setting consent to ${n} (was ${null===c(this,t)?"not set":c(this,t)}).`),r=n,a(s=this,o=t,"write to private field"),l?l.call(s,r):o.set(s,r),this.clarity.consent("consent",n),d(this,e,i).call(this,b.EVENT_NAMES.CHANGE,{detail:n}))}}t=new WeakMap,e=new WeakSet,n=async function(){const t=this;async function n(e){console.log(`<bib-clarity> recieved an event from <bib-consent>: ${e.type}`,e.detail);const n=e.detail;if(null===n)return void t.setConsent(!1);const{analytics_consent:i}=n;t.setConsent("granted"===i)}this.clarity.init(this.projectId),setTimeout((async()=>{const s=document.querySelector("bib-consent");null===s?(console.info("No <bib-consent /> element found. Turning off Clarity tracking."),t.setConsent(!1)):(s.addEventListener(b.EVENT_NAMES.READY,n),s.addEventListener(b.EVENT_NAMES.CHANGE,n)),d(this,e,i).call(this,b.EVENT_NAMES.READY)}))},i=function(t,e=null){p.dispatchPublicEvent(this,t,{detail:e})},r(f,"properties",{projectId:{type:String,attribute:"project-id"},hidden:{type:Boolean}}),r(f,"styles",[y.i`${y.r("@layer component{:host(hidden){display:none}}")}`]),window.customElements.get("bib-clarity")||window.customElements.define("bib-clarity",f),u.addToGlobalBib("clarity",{}),exports.BibClarity=f;
//# sourceMappingURL=bib-clarity.cjs.map
